# Spark_developer_project_work_anomaly_detector
project work for otus course spark developer

Проектная работа в рамках курса Отус "Spark Developer"

Название: "Сервис детекции аномалий на основе лямбда-архитектуры с использованием Apache Spark Streaming"

Шаги преобразования данных:

Источник данных – 3 точки (X, Y, Z) + метка времени создания в формате Long

Данные нормализуются с использованием стандартного нормирования

С помощью метода главных компомент (PCA) размерность исходных данных уменьшается до 2 

Для каждого значения рассчитывается расстояние Махаланобиса, отражающее, как далеко данная точка (данная запись) расположена от средней точки всего датасета (батча)

Для тех значений, где расстояние Махаланобиса больше определенного значения, устанавливается флаг аномалии (1), иначе значение считается нормальным (устанавливается значение флага, равное 0)



https://ru.wikipedia.org/wiki/Метод_главных_компонент

https://ru.wikipedia.org/wiki/Расстояние_Махаланобиса


Входные данные:

{"Curts": 1668347393828, "X": 41, "Y": 40, "Z": 21}

{"Curts": 1668347395625, "X": 24, "Y": 37, "Z": 25}

{"Curts": 1668347396144, "X": 20, “Y": 57, "Z": 25}

{"Curts": 1668347396662, "X": 112, "Y“: -9, "Z": 2}

{"Curts": 1668347397179, "X": 38, "Y": 42, "Z": 30}

{"Curts": 1668347397694, "X": 35, "Y": 53, "Z": 28}

{"Curts": 1668347398241, "X": 51, "Y": 59, "Z": 30}



Выходные данные:

{"Curts": 1668347393828, "X": 41, "Y": 40, "Z": 21, "annom-flag": 0}

{"Curts": 1668347395625, "X": 24, "Y": 37, "Z": 25, "annom-flag": 0}

{"Curts": 1668347396144, "X": 20, "Y": 57, "Z": 25, "annom-flag": 0}

{"Curts": 1668347396662, "X": 112, "Y": -9, "Z": 2, "annom-flag": 1}

{"Curts": 1668347397179, "X": 38, "Y": 42, "Z": 30, "annom-flag": 0}

{"Curts": 1668347397694, "X": 35, "Y": 53, "Z": 28, "annom-flag": 0}

{"Curts": 1668347398241, "X": 51, "Y": 59, "Z": 30, "annom-flag": 0}





Схема (архитектура) приложения:

![image](https://user-images.githubusercontent.com/108536539/201722136-abd14524-a87c-45ba-a1cc-ccb2eb7b0951.png)



